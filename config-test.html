<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard URL Test</title>
    <script src="config.js"></script>
</head>
<body>
    <h1>Admin Dashboard URL Configuration Test</h1>
    <div id="results"></div>

    <script>
        const results = document.getElementById('results');
        
        function addResult(label, value, type = 'info') {
            const div = document.createElement('div');
            div.style.margin = '10px 0';
            div.style.padding = '10px';
            div.style.border = '1px solid #ccc';
            div.style.backgroundColor = type === 'success' ? '#d4edda' : type === 'error' ? '#f8d7da' : '#e2e3e5';
            div.innerHTML = `<strong>${label}:</strong> ${value}`;
            results.appendChild(div);
        }
        
        // Test configuration
        addResult('CONFIG exists', typeof CONFIG !== 'undefined' ? 'Yes ✅' : 'No ❌');
        addResult('getApiUrl function exists', typeof getApiUrl === 'function' ? 'Yes ✅' : 'No ❌');
        
        if (typeof CONFIG !== 'undefined') {
            addResult('Environment', CONFIG.API.ENVIRONMENT);
            addResult('Production Base URL', CONFIG.API.PRODUCTION_BASE_URL);
        }
        
        if (typeof getApiUrl === 'function') {
            const villaUrl = getApiUrl('villa.php');
            addResult('Villa API URL', villaUrl, villaUrl.includes('api.rumahdaisycantik.com') ? 'success' : 'error');
            
            // Test the actual API call
            fetch(villaUrl)
                .then(response => {
                    addResult('API Test Status', response.status + ' ' + (response.ok ? 'OK ✅' : 'Failed ❌'), response.ok ? 'success' : 'error');
                    return response.json();
                })
                .then(data => {
                    addResult('API Response Success', data.success ? 'Yes ✅' : 'No ❌', data.success ? 'success' : 'error');
                    if (data.data && data.data.name) {
                        addResult('Villa Name', data.data.name);
                    }
                })
                .catch(error => {
                    addResult('API Error', error.message, 'error');
                });
        } else {
            addResult('ERROR', 'getApiUrl function not available - config.js not loaded', 'error');
        }
    </script>
</body>
</html>